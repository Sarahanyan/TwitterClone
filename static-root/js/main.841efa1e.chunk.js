(this["webpackJsonptweetme2-web"]=this["webpackJsonptweetme2-web"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),r=n.n(s),o=n(5),a=n.n(o);n(16);function i(e,t,n,c){var s={};c&&(s=JSON.stringify(c));var r=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),c=0;c<n.length;c++){var s=n[c].trim();if(s.substring(0,e.length+1)===e+"="){t=decodeURIComponent(s.substring(e.length+1));break}}return t}("csrftoken"),o=new XMLHttpRequest,a="http://localhost:8000/api".concat(t);o.responseType="json",o.open(e,a),o.setRequestHeader("Content-Type","application/json"),r&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-CSRFToken",r)),o.onload=function(){403===o.status&&("Authentication credentials were not provided."===o.response.detail&&-1===window.location.href.indexOf("login")&&(window.location.href="/login/?showLoginRequired=true"));n(o.response,o.status)},o.onerror=function(){alert("Sorry, a serious error occured")},o.send(s)}function l(e,t){var n="/tweets/feed/";t&&(n=t.replace("http://localhost:8000/api","")),i("GET",n,e)}function u(e,t,n){var c="/tweets/";e&&(c="/tweets/?username=".concat(e)),n&&(c=n.replace("http://localhost:8000/api","")),i("GET",c,t)}var d=function(e){var t=e.singleTweet,n=e.action,s=e.tweetActionDidPerform,r=t.likes,o="like"===n?"btn-primary":"unlike"===n?"btn-outline-secondary":"btn-outline-success",a={like:"".concat(r," likes"),unlike:"unlike",retweet:"retweet"};function l(e,t){200!==t&&201!==t||s(e,t)}return Object(c.jsx)("button",{className:"btn ".concat(o," mx-1"),onClick:function(e){e.preventDefault(),function(e,t,n){i("POST","/tweets/action/",e,{id:t,action:n})}(l,t.id,n)},children:a[n]})},j=n(3),b=n(2),f=n(10),m=function(e){var t=e.user,n=e.stylings,s=e.hideLink,r=e.classes,o=Object(c.jsx)("span",{className:r,style:n,children:t&&t.first_name[0].toUpperCase()});return s?{profilePic:o}:Object(c.jsx)(O,{children:o})},O=function(e){var t=e.username;return Object(c.jsx)("span",{onClick:function(e){e.preventDefault(),window.location.href="/profiles /".concat(t)},className:"pointer",children:e.children})},h=function(e){var t=e.user,n=e.includeFullName,s=e.hideLink,r=t&&(n?"".concat(t.first_name," ").concat(t.last_name):null);return Object(c.jsxs)(c.Fragment,{children:[r," ",Object(c.jsx)("br",{}),t&&s?"@".concat(t.username):Object(c.jsxs)(O,{username:t.username,children:["@",t.username]})]})},x=n(4);var p=n(9),w=n.n(p);function v(e){return Object(c.jsx)("span",{children:w()(e.children).format("0a")})}var g=function(e){var t=e.user,n=e.didFollowToggle,s=e.profileLoading,r=t.is_following?"Unfollow":"Follow";r=s?"Loading...":r;return Object(c.jsx)("div",{className:"container my-5 px-auto",children:Object(c.jsx)("div",{className:"card mb-3",style:{maxWidth:"90%"},children:Object(c.jsxs)("div",{className:"row g-0",children:[Object(c.jsxs)("div",{className:"col-md-4 py-5 px-4",children:[Object(c.jsx)(m,{user:t,stylings:{fontSize:"2.7rem",backgroundColor:"#245280"},classes:"px-5 py-4 mt-5 mb-5 rounded-circle text-white"}),Object(c.jsx)("br",{}),Object(c.jsx)("h5",{className:"card-title mt-5",children:Object(c.jsx)(h,{user:t,includeFullName:!0,hideLink:!0})})]}),Object(c.jsx)("div",{className:"col-md-8",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("p",{children:["Followers: ",Object(c.jsx)(v,{children:t.followers_count})]}),Object(c.jsxs)("p",{children:["Following: ",Object(c.jsx)(v,{children:t.following_count})]}),Object(c.jsx)("p",{children:t.location}),Object(c.jsx)("p",{children:t.bio}),Object(c.jsx)("button",{className:"btn btn-primary mt-3",onClick:function(e){e.preventDefault(),s||n(r)},children:r})]})})]})})})},N=function(e){var t=e.username,n=Object(s.useState)(null),r=Object(b.a)(n,2),o=r[0],a=r[1],l=Object(s.useState)(!1),u=Object(b.a)(l,2),d=u[0],j=u[1],f=function(e,t){200===t?(a(Object(x.a)({},e)),console.log(o)):alert("Sorry, a serious error occured")};Object(s.useEffect)((function(){!function(e,t){i("GET","/profiles/".concat(e,"/"),t)}(t,f)}),[t]);return o?Object(c.jsx)(g,{user:o,didFollowToggle:function(e){j(!0),function(e,t,n){var c={action:"".concat(t&&t).toLowerCase()};console.log(c),i("POST","/profiles/".concat(e,"/follow/"),n,c)}(t,e,(function(e,t){200===t&&(a(e),console.log(o)),j(!1)}))},profileLoading:d}):Object(c.jsx)("h1",{children:"Loading..."})},k=function(e){var t=e.singleTweet,n=t.content,r=(t.likes,t.id,t.user),o=e.handleDidRetweet,a=e.singleTweet.parent,i=Object(s.useState)(e.singleTweet),l=Object(b.a)(i,2),u=l[0],j=l[1],O=x(u);function x(e){var t=window.location.pathname,n=Object(f.a)(/([0-9]+)/,{tweetId:1}),c=t.match(n),s=c?c.groups.tweetId:-1;return"".concat(e.id)==="".concat(s)}var p=function(e){e.preventDefault(),window.location.href="".concat(u.id)},w=function(e,t){200===t?j(e):201===t&&o(e)};return Object(c.jsxs)("div",{className:"col-10 py-5 my-3 border-bottom",children:[Object(c.jsxs)("div",{className:"d-flex mb-2",children:[Object(c.jsx)(m,{user:r,stylings:{fontSize:"2.2rem",backgroundColor:"#245280"},classes:"px-4 py-3 rounded-circle text-white"}),Object(c.jsx)("p",{className:"mx-3",children:Object(c.jsx)(h,{user:r,includeFullName:!0})})]}),n&&Object(c.jsx)("h3",{className:"mx-5",children:n}),a&&Object(c.jsx)("div",{children:Object(c.jsx)(y,{tweet:a,checkIfDetailView:x,handleLink:p})}),Object(c.jsxs)("div",{className:"btn btn-group",children:[Object(c.jsx)(d,{singleTweet:u,action:"like",tweetActionDidPerform:w}),Object(c.jsx)(d,{singleTweet:u,action:"unlike",tweetActionDidPerform:w}),Object(c.jsx)(d,{singleTweet:u,action:"retweet",tweetActionDidPerform:w}),!O&&Object(c.jsx)("button",{className:"btn btn-outline-secondary mx-2",onClick:p,children:"View"})]})]})},y=function(e){var t=e.checkIfDetailView,n=e.handleLink,s=e.tweet,r=s.content,o=s.user,a=t(e.tweet);return Object(c.jsxs)("div",{className:"col-9 mx-auto border rounded py-1 px-2 mb-2",style:{background:"#e8eef4"},children:[Object(c.jsx)("p",{className:"mb-2 text-muted small",children:"Retweet"}),Object(c.jsxs)("div",{className:"d-flex mt-4 pointer",children:[Object(c.jsx)(m,{user:o,stylings:{fontSize:"2.2rem",backgroundColor:"#245280"},classes:"px-4 py-3 rounded-circle text-white"}),Object(c.jsx)("p",{className:"mx-3",children:Object(c.jsx)(h,{user:o,includeFullName:!0})})]}),Object(c.jsx)("h3",{children:r}),!a&&Object(c.jsx)("button",{className:"btn btn-link",onClick:n,children:"View"})]})};function T(e){var t=Object(s.useState)([]),n=Object(b.a)(t,2),r=n[0],o=n[1],a=Object(s.useState)(null),i=Object(b.a)(a,2),l=i[0],d=i[1],f=e.createdTweet;Object(s.useEffect)((function(){o([f].concat(Object(j.a)(r)))}),[f]),Object(s.useEffect)((function(){u(e.username,(function(e,t){200===t&&(o(e.results),r||o([{id:1,content:"hey"},{id:2,content:"heysup"},{id:3,content:"sup"}]),d(e.next))}))}),[]);var m=function(e){o([e].concat(Object(j.a)(r)))};return Object(c.jsxs)("div",{className:"container align-center",children:[r.map((function(e,t){var n=e.id;e.content,e.likes;return Object(c.jsx)("div",{children:Object(c.jsx)(k,{singleTweet:e,handleDidRetweet:m})},"".concat(t,"-").concat(n))})),null!==l&&Object(c.jsx)("button",{className:"btn btn-success float-end",onClick:function(t){t.preventDefault();u(e.username,(function(e,t){200===t&&(o([].concat(Object(j.a)(r),Object(j.a)(e.results))),d(e.next))}),l)},children:"More Tweets  >>>"})]})}var S=function(e){var t=e.didTweet,n=(e.canTweet,Object(s.useRef)()),r=Object(s.useState)({}),o=Object(b.a)(r,2);o[0],o[1];return Object(c.jsx)("div",{className:"col-12 my-4",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.current.value;console.log(c);i("POST","/tweets/create/",(function(e,n){201===n&&t(e)}),{content:c}),n.current.value=""},children:[Object(c.jsx)("textarea",{ref:n,required:!0,className:"form-control"}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",children:"Tweet"})]})})};function C(e){var t=Object(s.useState)([]),n=Object(b.a)(t,2),r=n[0],o=n[1],a=Object(s.useState)(null),i=Object(b.a)(a,2),u=i[0],d=i[1],f=e.createdTweet;Object(s.useEffect)((function(){o([f].concat(Object(j.a)(r)))}),[f]),Object(s.useEffect)((function(){l((function(e,t){200===t&&(o(e.results),r||o([{id:1,content:"hey"},{id:2,content:"heysup"},{id:3,content:"sup"}]),d(e.next))}))}),[]);var m=function(e){o([e].concat(Object(j.a)(r)))};return Object(c.jsxs)("div",{className:"container align-center",children:[r.map((function(e,t){var n=e.id;e.content,e.likes;return Object(c.jsx)("div",{children:Object(c.jsx)(k,{singleTweet:e,handleDidRetweet:m})},"".concat(t,"-").concat(n))})),null!==u&&Object(c.jsx)("button",{className:"btn btn-success float-end",onClick:function(e){e.preventDefault();l((function(e,t){200===t&&(o([].concat(Object(j.a)(r),Object(j.a)(e.results))),d(e.next))}),u)},children:"More Tweets  >>>"})]})}var E=function(e){var t="false"!==e.canTweet,n=Object(s.useState)({}),r=Object(b.a)(n,2),o=r[0],a=r[1];return Object(c.jsxs)("div",{className:"col-12 my-4",children:[t&&Object(c.jsx)(S,{didTweet:function(e){a(e)}}),Object(c.jsx)(T,Object(x.a)({createdTweet:o},e))]})},D=function(e){console.log(e);var t=e.tweetId,n=Object(s.useState)(),r=Object(b.a)(n,2),o=r[0],a=r[1],l=function(e,t){200===t?(a(Object(x.a)({},e)),console.log(o)):alert("Sorry, a serious error occured")};return Object(s.useEffect)((function(){!function(e,t){i("GET","/tweets/".concat(e),t)}(t,l)}),[t]),Object(c.jsx)("div",{className:"mx-auto",children:o&&Object(c.jsx)(k,{singleTweet:o})})},L=n.p+"static/media/logo.6ce24c58.svg";n(17);var F=function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("header",{className:"App-header",children:[Object(c.jsx)("img",{src:L,className:"App-logo",alt:"logo"}),Object(c.jsxs)("p",{children:["Edit ",Object(c.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(c.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]}),Object(c.jsx)("div",{className:"container align-center",children:Object(c.jsx)(E,{})})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),r(e),o(e)}))};document.getElementById("root")&&a.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(F,{})}),document.getElementById("root"));var A=document.getElementById("tweetme-2-feed"),I=r.a.createElement;A&&a.a.render(I((function(e){var t="false"!==e.canTweet,n=Object(s.useState)({}),r=Object(b.a)(n,2),o=r[0],a=r[1];return Object(c.jsxs)("div",{className:"col-12 my-4",children:[t&&Object(c.jsx)(S,{didTweet:function(e){a(e)}}),Object(c.jsx)(C,Object(x.a)({createdTweet:o},e))]})}),A.dataset),A);var q=document.getElementById("tweetme-2");q&&a.a.render(I(E,q.dataset),q),document.querySelectorAll(".tweetme-2-detail").forEach((function(e){a.a.render(I(D,e.dataset),e)})),document.querySelectorAll(".tweetme-2-profile-detail").forEach((function(e){a.a.render(I(N,e.dataset),e)})),R()}},[[18,1,2]]]);
//# sourceMappingURL=main.841efa1e.chunk.js.map