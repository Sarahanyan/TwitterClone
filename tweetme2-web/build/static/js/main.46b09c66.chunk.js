(this["webpackJsonptweetme2-web"]=this["webpackJsonptweetme2-web"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),a=n.n(s),r=n(5),i=n.n(r);n(15);function o(e,t,n,c){var s={};c&&(s=JSON.stringify(c));var a=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),c=0;c<n.length;c++){var s=n[c].trim();if(s.substring(0,e.length+1)===e+"="){t=decodeURIComponent(s.substring(e.length+1));break}}return t}("csrftoken"),r=new XMLHttpRequest,i="http://localhost:8000/api".concat(t);r.responseType="json",r.open(e,i),r.setRequestHeader("Content-Type","application/json"),a&&(r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",a)),r.onload=function(){403===r.status&&("Authentication credentials were not provided."===r.response.detail&&-1===window.location.href.indexOf("login")&&(window.location.href="/login/?showLoginRequired=true"));n(r.response,r.status)},r.onerror=function(){alert("Sorry, a serious error occured")},r.send(s)}function l(e,t){var n="/tweets/feed/";t&&(n=t.replace("http://localhost:8000/api","")),o("GET",n,e)}function u(e,t,n){var c="/tweets/";e&&(c="/tweets/?username=".concat(e)),n&&(c=n.replace("http://localhost:8000/api","")),o("GET",c,t)}var d=function(e){var t=e.singleTweet,n=e.action,s=e.tweetActionDidPerform,a=t.likes,r="like"===n?"btn-primary":"unlike"===n?"btn-outline-secondary":"btn-outline-success",i={like:"".concat(a," likes"),unlike:"unlike",retweet:"retweet"};function l(e,t){200!==t&&201!==t||s(e,t)}return Object(c.jsx)("button",{className:"btn ".concat(r," mx-1"),onClick:function(e){e.preventDefault(),function(e,t,n){o("POST","/tweets/action/",e,{id:t,action:n})}(l,t.id,n)},children:i[n]})},j=n(3),b=n(2),f=n(9),m=function(e){var t=e.user;e.stylings;return Object(c.jsx)(O,{children:Object(c.jsx)("span",{className:"px-4 py-3 rounded-circle text-white",style:{fontSize:"2.2rem",backgroundColor:"#245280"},children:t&&t.first_name[0].toUpperCase()})})},O=function(e){var t=e.username;return Object(c.jsx)("span",{onClick:function(e){e.preventDefault(),window.location.href="/profiles /".concat(t)},className:"pointer",children:e.children})},h=function(e){var t=e.user,n=e.includeFullName,s=t&&(n?"".concat(t.first_name," ").concat(t.last_name):null);return Object(c.jsxs)(c.Fragment,{children:[s," ",Object(c.jsx)("br",{}),t&&Object(c.jsxs)(O,{username:t.username,children:["@",t.username]})]})},x=function(e){var t=e.singleTweet,n=t.content,a=(t.likes,t.id,t.user),r=e.handleDidRetweet,i=e.singleTweet.parent,o=Object(s.useState)(e.singleTweet),l=Object(b.a)(o,2),u=l[0],j=l[1],O=x(u);function x(e){var t=window.location.pathname,n=Object(f.a)(/([0-9]+)/,{tweetId:1}),c=t.match(n),s=c?c.groups.tweetId:-1;return"".concat(e.id)==="".concat(s)}var w=function(e){e.preventDefault(),window.location.href="".concat(u.id)},v=function(e,t){200===t?j(e):201===t&&r(e)};return Object(c.jsxs)("div",{className:"col-10 py-5 my-3 border-bottom",children:[Object(c.jsxs)("div",{className:"d-flex mb-2",children:[Object(c.jsx)(m,{user:a}),Object(c.jsx)("p",{className:"mx-3",children:Object(c.jsx)(h,{user:a,includeFullName:!0})})]}),n&&Object(c.jsx)("h3",{className:"mx-5",children:n}),i&&Object(c.jsx)("div",{children:Object(c.jsx)(p,{tweet:i,checkIfDetailView:x,handleLink:w})}),Object(c.jsxs)("div",{className:"btn btn-group",children:[Object(c.jsx)(d,{singleTweet:u,action:"like",tweetActionDidPerform:v}),Object(c.jsx)(d,{singleTweet:u,action:"unlike",tweetActionDidPerform:v}),Object(c.jsx)(d,{singleTweet:u,action:"retweet",tweetActionDidPerform:v}),!O&&Object(c.jsx)("button",{className:"btn btn-outline-secondary mx-2",onClick:w,children:"View"})]})]})},p=function(e){var t=e.checkIfDetailView,n=e.handleLink,s=e.tweet,a=s.content,r=s.user,i=t(e.tweet);return Object(c.jsxs)("div",{className:"col-9 mx-auto border rounded py-1 px-2 mb-2",style:{background:"#e8eef4"},children:[Object(c.jsx)("p",{className:"mb-2 text-muted small",children:"Retweet"}),Object(c.jsxs)("div",{className:"d-flex mt-4 pointer",children:[Object(c.jsx)(m,{user:r}),Object(c.jsx)("p",{className:"mx-3",children:Object(c.jsx)(h,{user:r,includeFullName:!0})})]}),Object(c.jsx)("h3",{children:a}),!i&&Object(c.jsx)("button",{className:"btn btn-link",onClick:n,children:"View"})]})};function w(e){var t=Object(s.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1],i=Object(s.useState)(null),o=Object(b.a)(i,2),l=o[0],d=o[1],f=e.createdTweet;Object(s.useEffect)((function(){r([f].concat(Object(j.a)(a)))}),[f]),Object(s.useEffect)((function(){u(e.username,(function(e,t){200===t&&(r(e.results),a||r([{id:1,content:"hey"},{id:2,content:"heysup"},{id:3,content:"sup"}]),d(e.next))}))}),[]);var m=function(e){r([e].concat(Object(j.a)(a)))};return Object(c.jsxs)("div",{className:"container align-center",children:[a.map((function(e,t){var n=e.id;e.content,e.likes;return Object(c.jsx)("div",{children:Object(c.jsx)(x,{singleTweet:e,handleDidRetweet:m})},"".concat(t,"-").concat(n))})),null!==l&&Object(c.jsx)("button",{className:"btn btn-success float-end",onClick:function(t){t.preventDefault();u(e.username,(function(e,t){200===t&&(r([].concat(Object(j.a)(a),Object(j.a)(e.results))),d(e.next))}),l)},children:"More Tweets  >>>"})]})}var v=n(7),g=function(e){var t=e.didTweet,n=(e.canTweet,Object(s.useRef)()),a=Object(s.useState)({}),r=Object(b.a)(a,2);r[0],r[1];return Object(c.jsx)("div",{className:"col-12 my-4",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.current.value;console.log(c);o("POST","/tweets/create/",(function(e,n){201===n&&t(e)}),{content:c}),n.current.value=""},children:[Object(c.jsx)("textarea",{ref:n,required:!0,className:"form-control"}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",children:"Tweet"})]})})};function k(e){var t=Object(s.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1],i=Object(s.useState)(null),o=Object(b.a)(i,2),u=o[0],d=o[1],f=e.createdTweet;Object(s.useEffect)((function(){r([f].concat(Object(j.a)(a)))}),[f]),Object(s.useEffect)((function(){l((function(e,t){200===t&&(r(e.results),a||r([{id:1,content:"hey"},{id:2,content:"heysup"},{id:3,content:"sup"}]),d(e.next))}))}),[]);var m=function(e){r([e].concat(Object(j.a)(a)))};return Object(c.jsxs)("div",{className:"container align-center",children:[a.map((function(e,t){var n=e.id;e.content,e.likes;return Object(c.jsx)("div",{children:Object(c.jsx)(x,{singleTweet:e,handleDidRetweet:m})},"".concat(t,"-").concat(n))})),null!==u&&Object(c.jsx)("button",{className:"btn btn-success float-end",onClick:function(e){e.preventDefault();l((function(e,t){200===t&&(r([].concat(Object(j.a)(a),Object(j.a)(e.results))),d(e.next))}),u)},children:"More Tweets  >>>"})]})}var N=function(e){var t="false"!==e.canTweet,n=Object(s.useState)({}),a=Object(b.a)(n,2),r=a[0],i=a[1];return Object(c.jsxs)("div",{className:"col-12 my-4",children:[t&&Object(c.jsx)(g,{didTweet:function(e){i(e)}}),Object(c.jsx)(w,Object(v.a)({createdTweet:r},e))]})},T=function(e){console.log(e);var t=e.tweetId,n=Object(s.useState)(),a=Object(b.a)(n,2),r=a[0],i=a[1],l=function(e,t){200===t?(i(Object(v.a)({},e)),console.log(r)):alert("Sorry, a serious error occured")};return Object(s.useEffect)((function(){!function(e,t){o("GET","/tweets/".concat(e),t)}(t,l)}),[t]),Object(c.jsx)("div",{className:"mx-auto",children:r&&Object(c.jsx)(x,{singleTweet:r})})},y=n.p+"static/media/logo.6ce24c58.svg";n(16);var S=function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("header",{className:"App-header",children:[Object(c.jsx)("img",{src:y,className:"App-logo",alt:"logo"}),Object(c.jsxs)("p",{children:["Edit ",Object(c.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(c.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]}),Object(c.jsx)("div",{className:"container align-center",children:Object(c.jsx)(N,{})})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};document.getElementById("root")&&i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(S,{})}),document.getElementById("root"));var E=document.getElementById("tweetme-2-feed"),R=a.a.createElement;E&&i.a.render(R((function(e){var t="false"!==e.canTweet,n=Object(s.useState)({}),a=Object(b.a)(n,2),r=a[0],i=a[1];return Object(c.jsxs)("div",{className:"col-12 my-4",children:[t&&Object(c.jsx)(g,{didTweet:function(e){i(e)}}),Object(c.jsx)(k,Object(v.a)({createdTweet:r},e))]})}),E.dataset),E);var C=document.getElementById("tweetme-2");C&&i.a.render(R(N,C.dataset),C),document.querySelectorAll(".tweetme-2-detail").forEach((function(e){i.a.render(R(T,e.dataset),e)})),D()}},[[17,1,2]]]);
//# sourceMappingURL=main.46b09c66.chunk.js.map